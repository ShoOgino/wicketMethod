	protected void select(Foo foo, AbstractTree<Foo> tree, final Optional<AjaxRequestTarget> targetOptional)
	{
		if (selected != null)
		{
			tree.updateNode(selected.getObject(), targetOptional);

			selected.detach();
			selected = null;
		}

		selected = provider.model(foo);

		tree.updateNode(foo, targetOptional);
	}

