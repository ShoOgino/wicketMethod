    /**
     * set current session.
     *
     * @param session
     *            hibernate session
     * @param actionForCurrentSession
     *            one of the constants HibernateHelperThreadLocaleImpl.ACTION_CLOSE close current
     *            session HibernateHelperThreadLocaleImpl.ACTION_DISCONNECT disconnect current
     *            session
     */
    public void setSession(Session session, int actionForCurrentSession)
    {
        Session sess = (Session) hibernateHolder.get();

        if (sess != null)
        {
            if (actionForCurrentSession == HibernateHelper.ACTION_CLOSE)
            {
                try
                {
                    sess.close();
                }
                catch (HibernateException ex)
                {
                    log.error(ex);
                }
            }
            else if (actionForCurrentSession == HibernateHelper.ACTION_DISCONNECT)
            {
                try
                {
                    sess.disconnect();
                }
                catch (HibernateException ex)
                {
                    log.error(ex);
                }
            }
            else
            {
                throw new RuntimeException("invallid action "
                    + actionForCurrentSession);
            }
        }

        hibernateHolder.set(session);
    }

