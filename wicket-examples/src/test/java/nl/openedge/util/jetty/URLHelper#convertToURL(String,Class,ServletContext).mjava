	/**
	 * Interprets some absolute URLs as external paths, otherwise generates URL
	 * appropriate for loading from internal webapp or, servletContext is null,
	 * loading from the classpath.
	 * 
	 * @param pathToTranslate
	 *            path to translate
	 * @param caller
	 *            caller of method
	 * @param servletContext
	 *            servlet context of webapp
	 * @throws MalformedURLException
	 *             when the path does not follow the URL rules
	 * @return the converted URL
	 */
	public static URL convertToURL(String pathToTranslate, Class caller,
			ServletContext servletContext) throws MalformedURLException
	{
		String path = pathToTranslate;
		URL url = null;
		if (path.startsWith("file:") || path.startsWith("http:") || path.startsWith("https:")
				|| path.startsWith("ftp:") || path.startsWith("jar:"))
		{
			url = new URL(path);
		}
		else if (servletContext != null)
		{
			url = getServletContextURL(servletContext, path);
		}
		else
		{
			url = getClasspathURL(caller, path);
		}
		return url;
	}

