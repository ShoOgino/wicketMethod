	/**
	 * 
	 * @throws IOException
	 * @throws ServletException
	 */
	public void testPersistCookie() throws IOException, ServletException
	{
		panel.setPersistent(true);

		// test will call persistFromComponentData(), which is private
		form.onFormSubmitted();

		// validate
		Collection<Cookie> cookies = tester.getServletResponse().getCookies();
		Assert.assertEquals(2, cookies.size());
		for (Cookie cooky : cookies)
		{
			Assert.assertNotNull(page.get(cooky.getName()));
			// Skip "deleted" cookies
			if (page.get(cooky.getName()).getDefaultModelObjectAsString() != "")
			{
				Assert.assertEquals(cooky.getValue(), page.get(cooky.getName())
						.getDefaultModelObjectAsString());
			}
		}
	}

