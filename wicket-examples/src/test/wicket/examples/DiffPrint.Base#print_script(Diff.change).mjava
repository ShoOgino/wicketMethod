		/**
		 * Divide SCRIPT into pieces by calling HUNKFUN and print each piece
		 * with PRINTFUN. Both functions take one arg, an edit script. PRINTFUN
		 * takes a subscript which belongs together (with a null link at the
		 * end) and prints it.
		 * 
		 * @param script
		 */
		public void print_script(Diff.change script)
		{
			setupOutput();
			Diff.change next = script;

			while (next != null)
			{
				Diff.change t, end;

				/* Find a set of changes that belong together. */
				t = next;
				end = hunkfun(next);

				/*
				 * Disconnect them from the rest of the changes, making them a
				 * hunk, and remember the rest for next iteration.
				 */
				next = end.link;
				end.link = null;
				// if (DEBUG)
				// debug_script(t);

				/* Print this hunk. */
				print_hunk(t);

				/* Reconnect the script so it will all be freed properly. */
				end.link = next;
			}
			outfile.flush();
		}

