    /**
     * 
     * @throws IOException
     * @throws ServletException
     */
    public void testRemoveFromPage() throws IOException, ServletException
    {
        panel.setPersistent(true);
        
        // test
		page.removePersistedFormData(SignInPanel.SignInForm.class, true);
		
		// validate
        Collection cookieCollection = application.getServletResponse().getCookies();
        // Cookies are remove by setting maxAge == 0
        Assert.assertEquals(2, cookieCollection.size());

        // initialize
        final Cookie cookieUsername = new Cookie("panel:signInForm:username", "juergen");
        final Cookie cookiePassword = new Cookie("panel:signInForm:password", "test");
        final Cookie[] cookies = new Cookie[] {cookieUsername, cookiePassword};
        
        application.getServletRequest().setCookies(cookies);
        
        // test
		page.removePersistedFormData(SignInPanel.SignInForm.class, true);
		
		// validate
        cookieCollection = application.getServletResponse().getCookies();
        Assert.assertEquals(4, cookieCollection.size());
        Iterator iter = cookieCollection.iterator();
        while (iter.hasNext()) 
        {
        	Cookie cookie = (Cookie)iter.next();
        	Assert.assertNotNull(page.get(cookie.getName()));
        	Assert.assertEquals(cookie.getMaxAge(), 0);
        }
    }

