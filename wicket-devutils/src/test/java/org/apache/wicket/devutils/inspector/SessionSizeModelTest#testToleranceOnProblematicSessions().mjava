	/**
	 * @see <a href="https://issues.apache.org/jira/browse/WICKET-3355">WICKET-3355</a>
	 */
	@Test
	public void testToleranceOnProblematicSessions()
	{
		expectedException.expect(IllegalStateException.class);
		expectedException.expectMessage(containsString("A problem occurred while serializing an object. " +
				"Please check the earlier logs for more details. Problematic object: " +
				"org.apache.wicket.devutils.inspector.SessionSizeModelTest$TestSession"));

		new WicketTester(new MockApplication()
		{
			@Override
			public Session newSession(final Request request, final Response response)
			{
				return new TestSession(request);
			}
		});
		SessionSizeModel model = new SessionSizeModel();
		model.getObject();
	}

