	/**
	 * 
	 * @throws IOException
	 * @throws ServletException
	 */
	public void testPersistCookie() throws IOException, ServletException
	{
		panel.setPersistent(true);

		// test will call persistFromComponentData(), which is private
		form.onFormSubmitted();

		// validate
		Collection<Cookie> cookies = tester.getServletResponse().getCookies();
		Assert.assertEquals(2, cookies.size());
		for (Cookie cooky : cookies)
		{
			String pathOfStoredComponent = cooky.getName().replaceAll("\\.", ":");
			Assert.assertNotNull(page.get(pathOfStoredComponent));
			// Skip "deleted" cookies
			if (!page.get(pathOfStoredComponent).getDefaultModelObjectAsString().equals(""))
			{
				Assert.assertEquals(cooky.getValue(), page.get(pathOfStoredComponent)
						.getDefaultModelObjectAsString());
			}
		}
	}

