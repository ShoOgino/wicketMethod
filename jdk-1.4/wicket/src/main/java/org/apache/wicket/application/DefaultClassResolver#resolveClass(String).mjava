	/**
	 * @see org.apache.wicket.application.IClassResolver#resolveClass(java.lang.String)
	 */
	public final Class resolveClass(final String classname)
	{
		try
		{
			Class clazz = null;
			WeakReference ref = (WeakReference)classes.get(classname);
			// Might be garbage-collected between getting the WeakRef and retrieving the Class from it.
			if (ref != null)
			{
				clazz = (Class)ref.get();
			}
			if (clazz == null)
			{
				synchronized (classes)
				{
					ClassLoader loader = Thread.currentThread().getContextClassLoader();
					if (loader == null)
					{
						loader = DefaultClassResolver.class.getClassLoader();
					}
					clazz = loader.loadClass(classname);
					classes.put(classname, new WeakReference(clazz));
				}
			}
			return clazz;
		}
		catch (ClassNotFoundException ex)
		{
			throw new WicketRuntimeException("Unable to load class with name: " + classname, ex);
		}
	}

