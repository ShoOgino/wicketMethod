	/**
	 * Encodes a string so it is safe to use inside CDATA blocks
	 * 
	 * @param str
	 * @return encoded string
	 */
	protected String encode(String s)
	{
		if (s == null)
		{
			return null;
		}

		return Strings.replaceAll(s, "]", "]^").toString();
	}

