	/**
	 * Performs variable substitution on the specified <code>string</code>
	 * using variables declared in the <code>vars</code> map.
	 * 
	 * Variables in the message are identified using ${varname} syntax
	 * 
	 * @param string
	 * @param vars
	 * 
	 * @throws IllegalStateException
	 *             if a variable defined in the string cannot be found in the
	 *             <code>vars</code> map
	 * 
	 * @return string with variables subsituted
	 */
	String substitute(String string, Map vars) throws IllegalStateException;

