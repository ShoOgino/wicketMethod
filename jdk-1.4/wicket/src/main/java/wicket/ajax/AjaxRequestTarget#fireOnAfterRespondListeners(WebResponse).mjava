	private void fireOnAfterRespondListeners(final WebResponse response)
	{
		Iterator it;
		// invoke onafterresponse event on listeners
		if (listeners != null)
		{
			final Map components = Collections.unmodifiableMap(markupIdToComponent);

			// create response that will be used by listeners to append
			// javascript
			final IJavascriptResponse jsresponse = new IJavascriptResponse()
			{

				public void addJavascript(String script)
				{
					respondInvocation(response, script);
				}

			};

			it = listeners.iterator();
			while (it.hasNext())
			{
				((IListener)it.next()).onAfterRespond(components, jsresponse);
			}
		}
	}

