	/**
	 * Test direct access (with wicket parameters) to a mounted page that should
	 * NOT be allowed due to the {@link ISecuritySettings#getEnforceMounts()}
	 * setting being set to true.
	 */
	public void testDirectAccessToMountedPageNotAllowed()
	{
		tester.getApplication().getSecuritySettings().setEnforceMounts(true);

		tester.setupRequestAndResponse();
		tester.getServletRequest().setURL(
				"?wicket:bookmarkablePage=:" + TestPage.class.getName() + "");
		try
		{
			WebRequestCycle requestCycle = tester.createRequestCycle();
			tester.processRequestCycle(requestCycle);
			IRequestTarget requestTarget = requestCycle.getRequestTarget();
			assertTrue(requestTarget instanceof WebErrorCodeResponseTarget);
			WebErrorCodeResponseTarget error = (WebErrorCodeResponseTarget)requestTarget;
			assertEquals(HttpServletResponse.SC_FORBIDDEN, error.getErrorCode());
		}
		finally
		{
			tester.getApplication().getSecuritySettings().setEnforceMounts(false);
		}
	}

