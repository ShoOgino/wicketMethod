	/**
	 * Test clean-up of auto added components after removal of the
	 * HtmlHeaderContainer.
	 */
	public void testCleanUpOfAutoAddedComponents()
	{
		tester.startPage(ComponentResolvingPage.class);

		// onEndRequest() of auto added component was not called in
		// MarkupContainer#internalEndRequest() using an iterator
		ComponentResolvingPage page = (ComponentResolvingPage)tester.getLastRenderedPage();
		assertTrue("onDetach() should have been called",
				page.onDetachWasCalledOnAutoAddedComponent);
	}

