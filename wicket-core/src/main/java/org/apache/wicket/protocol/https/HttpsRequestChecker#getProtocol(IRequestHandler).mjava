	/**
	 * Figures out the protocol that should be used for a given request handler
	 * 
	 * @param requestHandler
	 * @return protocol
	 */
	public Protocol getProtocol(IRequestHandler requestHandler)
	{
		Class<?> pageClass = getPageClass(requestHandler);
		if (pageClass != null)
		{
			if (hasSecureAnnotation(pageClass))
			{
				return Protocol.HTTPS;
			}
			else
			{
				return Protocol.HTTP;
			}
		}
		else
		{
			return Protocol.PRESERVE_CURRENT;
		}
	}

