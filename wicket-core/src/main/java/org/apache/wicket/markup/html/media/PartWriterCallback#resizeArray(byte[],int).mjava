	/**
	 * Reallocates an array with a new size, and copies the contents of the old array to the new
	 * array.
	 *
	 * @param oldArray
	 *            the old array, to be reallocated.
	 * @param newSize
	 *            the new array size.
	 * @return A new array with the same contents.
	 */
	@SuppressWarnings("rawtypes")
	private static byte[] resizeArray(byte[] oldArray, int newSize)
	{
		int oldSize = oldArray.length;
		byte[] newArray = new byte[newSize];
		int minLength = Math.min(oldSize, newSize);
		if (minLength > 0)
		{
			System.arraycopy(oldArray, 0, newArray, 0, minLength);
		}
		return newArray;
	}

