	/**
	 * Encodes a string so it is safe to use inside CDATA blocks
	 *
	 * @param str
	 *      the string to encode.
	 * @return encoded string
	 */
	static String encode(CharSequence str)
	{
		if (str == null)
		{
			return null;
		}

		// split each CDATA end sequence
		return Strings.replaceAll(str, "]]>", "]]]]><![CDATA[>").toString();
	}

