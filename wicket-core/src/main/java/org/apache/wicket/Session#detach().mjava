	/**
	 * Any detach logic for session subclasses. This is called on the end of handling a request,
	 * when the RequestCycle is about to be detached from the current thread.
	 */
	public void detach()
	{
		detachFeedback();

		if (isSessionInvalidated())
		{
			invalidateNow();
		}
		else
		{
			// WICKET-5103 container might have changed id
			updateId();
		}
	}

