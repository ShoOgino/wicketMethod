	/**
	 * https://issues.apache.org/jira/browse/WICKET-4812
	 * https://issues.apache.org/jira/browse/WICKET-6334
	 */
	@Test
	public void whenSerializingNonPageComponent_thenItsSubComponentsShouldNotBeChecked() {
		JavaSerializer serializer = new JavaSerializer("JavaSerializerTest")
		{
			@Override
			protected ObjectOutputStream newObjectOutputStream(OutputStream out) throws IOException
			{
				IObjectChecker checker = new NotDetachedModelChecker();
				return new CheckingObjectOutputStream(out, checker);
			}
		};

		final ComponentWithAttachedModel component = new ComponentWithAttachedModel("id");

		final byte[] serialized = serializer.serialize(component);
		assertThat(serialized, is(notNullValue()));
	}

