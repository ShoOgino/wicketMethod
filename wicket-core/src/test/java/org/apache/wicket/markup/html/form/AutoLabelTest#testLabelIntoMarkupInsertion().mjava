	/** */
	public void testLabelIntoMarkupInsertion()
	{
		class MyTestPage extends TestPage
		{
			private static final long serialVersionUID = 1L;

			public MyTestPage(String labelMarkup)
			{
				super("<label wicket:for='t'>" + labelMarkup + "</label>");
				field.setLabel(Model.of("t"));
			}
		}

		// simple insertion
		assertRendered(new MyTestPage("<span class='label-text'>text</span>"),
			"<span class='label-text'>t</span>");

		// preserves markup before and after
		assertRendered(new MyTestPage(" <div> a </div> <span class='label-text'>text</span> b "),
			" <div> a </div> <span class='label-text'>t</span> b ");

		// embedded span tags
		assertRendered(
			new MyTestPage(" a <div> b <span class='label-text'>text</span> c </div> d"),
			" a <div> b <span class='label-text'>t</span> c </div> d");

		// double text span tags - only the first one is touched
		assertRendered(new MyTestPage(
			"<span class='label-text'>text</span><span class='label-text'>text</span>"),
			"<span class='label-text'>t</span><span class='label-text'>text</span>");

		// no span - no insertion
		assertRendered(new MyTestPage(" text "), " text ");

		// empty label tag
		assertRendered(new MyTestPage(""), "></label>");

		// empty span tag
		assertRendered(new MyTestPage("<span class='label-text'></span>"),
			"<span class='label-text'>t</span>");

		// open/close span tag
		assertRendered(new MyTestPage("<span class='label-text'/>"),
			"<span class='label-text'>t</span>");

		// test additional classes on the span are preserved
		assertRendered(new MyTestPage("<span class='foo label-text bar'/>"),
			"<span class='foo label-text bar'>t</span>");
	}

