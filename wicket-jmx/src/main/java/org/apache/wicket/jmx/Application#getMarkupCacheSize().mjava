	/**
	 * @see org.apache.wicket.jmx.ApplicationMBean#getMarkupCacheSize()
	 */
	@Override
	public int getMarkupCacheSize() throws IOException
	{
		ThreadContext.setApplication(application);
		
		try
		{
			return application.getMarkupSettings().getMarkupFactory().getMarkupCache().size();
		}
		finally
		{
			ThreadContext.detach();
		}
	}

