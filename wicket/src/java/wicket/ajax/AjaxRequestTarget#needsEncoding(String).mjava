	/**
	 * 
	 * @param str
	 * @return true if string needs to be encoded, false otherwise
	 */
	protected boolean needsEncoding(String str)
	{
		// TODO Ajax: we can improve this by keeping a buffer of at least 3
		// characters and checking that buffer so that we can narrow down
		// escaping occuring only for ']]>' sequence, or at least for ]] if ] is
		// the last char in this buffer.  Can't we use contains()?
		return str.indexOf(']') >= 0;
	}

