	/**
	 * Encodes a string so it is safe to use inside CDATA blocks
	 * 
	 * @param str
	 * @return encoded string
	 */
	protected String encode(String str)
	{
		// TODO Post 1.3: Java5: we can use str.replace(charseq, charseq) for
		// more efficient
		// replacement
		return str.replaceAll("]", "]^");
	}

