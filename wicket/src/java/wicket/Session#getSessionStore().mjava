	/**
	 * Gets the session store.
	 * 
	 * @return the session store
	 */
	protected final ISessionStore getSessionStore()
	{
		if (sessionStore == null)
		{
			ISessionStoreFactory sessionStoreFactory = application.getSessionSettings()
					.getSessionStoreFactory();
			sessionStore = sessionStoreFactory.newSessionStore(this);

			// still null?
			if (sessionStore == null)
			{
				throw new IllegalStateException(sessionStoreFactory.getClass().getName()
						+ " did not produce a session store");
			}
		}
		return sessionStore;
	}

