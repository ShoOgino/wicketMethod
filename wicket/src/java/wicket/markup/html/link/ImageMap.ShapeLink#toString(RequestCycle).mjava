        /**
         * The shape as a string using the given request cycle; will be used
         * for rendering.
         * @param cycle the current request cycle
         * @return The shape as a string
         */
        final String toString(final RequestCycle cycle)
        {
            //Add any popup script
            final String popupJavaScript;

            if (link.getPopupSpecification() != null)
            {
                popupJavaScript = link.getPopupSpecification().getPopupJavaScript();
            }
            else
            {
                popupJavaScript = null;
            }

            return "<area shape=\""
                    + getType() + "\"" + " coords=\"" + getCoordinates() + "\"" + " href=\""
                    + link.getURL(cycle) + "\""
                    + ((popupJavaScript == null) ? "" : (" onClick = \"" + popupJavaScript + "\""))
                    + ">";
        }

