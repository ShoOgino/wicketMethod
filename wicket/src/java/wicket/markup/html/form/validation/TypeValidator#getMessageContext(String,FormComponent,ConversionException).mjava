    /**
     * Gets the message context.
     * 
     * @param input
     *            The input
     * @param component
     *            the component
     * @param e
     *            the conversion exception
     * @return a map with variables for interpolation
     */
    protected Map getMessageContext(String input, FormComponent component, ConversionException e)
    {
        Map ctx = super.getMessageContextVariables(input, component);
        ctx.put("type", type);
        Locale loc = e.getLocale();
        if (loc != null)
            ctx.put("locale", loc);
        ctx.put("exception", e.getMessage());
        ctx.put("pattern", e.getPattern());
        return ctx;
    }

