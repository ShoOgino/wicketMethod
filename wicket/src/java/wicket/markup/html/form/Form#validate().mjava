	/**
	 * Validates the form and updates the models of form components. If the form
	 * validates successfully, handleValidSubmit() is called. If not,
	 * handleErrors() is called.
	 * 
	 * @see Form#onSubmit()
	 * @see Form#onError()
	 */
	protected final void validate()
	{
		// Redirect back to result to avoid postback warnings. But we turn
		// redirecting on as the first thing because the user's handleSubmit
		// implementation may wish to redirect somewhere else. In that case,
		// they can simply call setRedirect(false) in handleSubmit.
		getRequestCycle().setRedirect(true);

		// Validate model using validation delegate
		getValidationDelegate().validate(this);

		// If a validation error occurred
		if (hasError())
		{
			// mark all children as invalid
			invalid();
			
			// let subclass handle error
			onError();
		}
		else
		{
			// Persist FormComponents if requested
			persistFormComponentData();
			
			// Update model using form data
			updateFormComponentModels();
			
			// Model was successfully updated with valid data
			onSubmit();
		}
	}

