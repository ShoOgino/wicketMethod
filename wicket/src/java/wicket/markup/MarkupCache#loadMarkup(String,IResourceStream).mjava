	/**
	 * Loads markup.
	 * 
	 * @param key
	 *            Key under which markup should be cached
	 * @param markupResource
	 *            The markup resource to load
	 * @return The markup
	 */
	private Markup loadMarkup(final String key, final IResourceStream markupResource)
	{
		try
		{
			final Markup markup = application.newMarkupParser().readAndParse(markupResource);
			synchronized (markupCache)
			{
				markupCache.put(key, markup);
			}
			return markup;
		}
		catch (ParseException e)
		{
			log.error("Unable to parse markup from " + markupResource, e);
		}
		catch (ResourceStreamNotFoundException e)
		{
			log.error("Unable to find markup from " + markupResource, e);
		}
		catch (IOException e)
		{
			log.error("Unable to read markup from " + markupResource, e);
		}
		return Markup.NO_MARKUP;
	}

