	/**
	 * Gets the value that results when the given Ognl expression is applied to the model
	 * object (Ognl.getValue).
	 * @return the value that results when the given Ognl expression is applied to the
	 *         model object
	 * @see wicket.model.IModel#getObject()
	 */
	public Object getObject()
	{
		String expr = getExpression();
		if (expr == null || expr.trim().length() == 0)
		{
			// No expression will cause OGNL to throw an exception. The OGNL
			// expression to return the current object is "#this". Instead
			// of throwing that exception, we'll provide a meaningfull
			// return value
			return model.getObject();
		}
		IModel theModel = getModel();
		if (theModel == null)
		{
			return null;
		}
		Object modelObject = theModel.getObject();
		if (modelObject == null)
		{
			return null;
		}
		try
		{
			OgnlContext ctx = getContext();
			Object raw = Ognl.getValue(expr, ctx, modelObject);
			if (applyFormatting)
			{
				final IStringConverter converter;
				if(component != null) // could be null if used directly by clients
				{
					converter = component.getConverter();
				}
				else // safety option
				{
					Session session = Session.get();
					converter = (IStringConverter)session.getConverter();
				}
				return converter.toString(raw);
			}
			else
			{
				return raw;
			}
		}
		catch (OgnlException e)
		{
			throw new WicketRuntimeException(e);
		}
	}

