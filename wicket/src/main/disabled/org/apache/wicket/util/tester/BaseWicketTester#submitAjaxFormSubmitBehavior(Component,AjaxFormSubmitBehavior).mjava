	/**
	 * Helper method for all the places where an Ajax call should submit an associated
	 * <code>Form</code>.
	 * 
	 * @param component
	 *            The component the behavior is attached to
	 * @param behavior
	 *            The <code>AjaxFormSubmitBehavior</code> with the <code>Form</code> to "submit"
	 */
	private void submitAjaxFormSubmitBehavior(final Component component,
		AjaxFormSubmitBehavior behavior)
	{
		// The form that needs to be "submitted".
		Form<?> form = behavior.getForm();

		String failMessage = "No form attached to the submitlink.";
		notNull(failMessage, form);

		form.visitFormComponents(new FormComponent.AbstractVisitor()
		{
			@Override
			public void onFormComponent(FormComponent<?> formComponent)
			{
				if (!(formComponent instanceof RadioGroup) &&
					!(formComponent instanceof CheckGroup) &&
					!formComponent.getClass().isAssignableFrom(Button.class) &&
					formComponent.isVisible() && formComponent.isEnabledInHierarchy())
				{
					if (!((formComponent instanceof IFormSubmittingComponent) && (component instanceof IFormSubmittingComponent)) ||
						(component == formComponent))
					{
						String name = formComponent.getInputName();
						String value = formComponent.getValue();

						// Set request parameter with the field value, but do not modify an
						// existing request parameter explicitly set using
						// FormTester.setValue()
						if (getServletRequest().getParameterMap().get(name) == null)
						{
							getServletRequest().setParameter(name, value);
						}
					}
				}
			}
		});
	}

