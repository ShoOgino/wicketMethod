	/**
	 * Creates a new Page using the given constructor and argument.
	 * <p>
	 * Note that you can not create a Page with PageParameters and pass null.
	 * 
	 * @param constructor
	 *            The constructor to invoke
	 * @param argument
	 *            The argument to pass to the constructor or null to pass no arguments
	 * @return The new page
	 * @throws WicketRuntimeException
	 *             Thrown if the Page cannot be instantiated using the given constructor and
	 *             argument.
	 */
	private final RequestablePage createPage(
		final Constructor<? extends RequestablePage> constructor, final PageParameters argument)
	{
		final RequestablePage instance;
		try
		{
			if (argument != null)
			{
				instance = constructor.newInstance(new Object[] { argument });
			}
			else
			{
				instance = constructor.newInstance();
			}

			// the page might have not propagate page parameters from constructor. if that's the
			// case
			// we force the parameters
			if (argument != null && instance.getPageParameters() != argument)
			{
				instance.getPageParameters().assign(argument);
			}

			instance.setWasCreatedBookmarkable(true);

			return instance;

		}
		catch (InstantiationException e)
		{
			throw new WicketRuntimeException(createDescription(constructor, argument), e);
		}
		catch (IllegalAccessException e)
		{
			throw new WicketRuntimeException(createDescription(constructor, argument), e);
		}
		catch (InvocationTargetException e)
		{
			// honor redirect exception contract defined in IPageFactory
			if (e.getTargetException() instanceof AbortException ||
				e.getTargetException() instanceof AuthorizationException ||
				e.getTargetException() instanceof MarkupException)
			{
				throw (RuntimeException)e.getTargetException();
			}
			throw new WicketRuntimeException(createDescription(constructor, argument), e);
		}
	}

