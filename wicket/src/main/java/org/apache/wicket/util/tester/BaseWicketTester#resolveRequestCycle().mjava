	/**
	 * 
	 * @return
	 */
	protected WebRequestCycle resolveRequestCycle()
	{
		// initialize the request only if needed to allow the user to pass
		// request parameters, see WICKET-254
		WebRequestCycle requestCycle;
		if (RequestCycle.get() == null)
		{
			requestCycle = setupRequestAndResponse();
		}
		else
		{
			requestCycle = (WebRequestCycle)RequestCycle.get();

			// If a ajax request is requested but the existing is not, than we still need to create
			// a new one
			if ((requestCycle.getWebRequest().isAjax() == false) && (isCreateAjaxRequest() == true))
			{
				requestCycle = setupRequestAndResponse();
			}
		}
		return requestCycle;
	}

