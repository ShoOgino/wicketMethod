	/**
	 * THIS METHOD IS NOT PART OF THE WICKET PUBLIC API. DO NOT CALL OR
	 * OVERRIDE.
	 * 
	 * Called when a request ends.
	 */
	protected void internalDetach()
	{
		internalOnDetach();
		onDetach();

		List<Method> listeners = ReflectionUtils.invocationChainForAnnotation(getClass(),
				OnDetach.class, ClassOrder.SUB_TO_SUPER);
		for (Method method : listeners)
		{
			invokeAnnotatedListenerMethod(method, OnAttach.class);
		}

	}

