	/**
	 * Create the mock object. As part of the creation, the context ets the root
	 * directory where web application content is stored. This must be an
	 * ABSOLUTE directory relative to where the tests are being executed. For
	 * example: <code>System.getProperty("user.dir") +
	 * "/src/webapp"</code>
	 * 
	 * @param application
	 *            The application that this context is for
	 * @param path
	 *            The path to the root of the web application
	 */
	public MockServletContext(final Application application, final String path)
	{
		this.application = application;

		webappRoot = null;
		if (path != null)
		{
			webappRoot = new File(path);
			if (!webappRoot.exists() || !webappRoot.isDirectory())
			{
				log.warn("WARNING: The webapp root directory is invalid: " + path);
				webappRoot = null;
			}
		}

		mimeTypes.put("html", "text/html");
		mimeTypes.put("htm", "text/html");
		mimeTypes.put("css", "text/css");
		mimeTypes.put("xml", "text/xml");
		mimeTypes.put("js", "text/plain");
		mimeTypes.put("gif", "image/gif");
		mimeTypes.put("jpg", "image/jpeg");
		mimeTypes.put("png", "image/png");

		// Set ServletContext temp dir
		try
		{
			File tmpDir = File.createTempFile("wicket", null);
			File dir = new File(tmpDir.getParentFile(),tmpDir.getName() + "p");
			dir.mkdir();
			setAttribute("javax.servlet.context.tempdir", dir);
			tmpDir.delete();
		}
		catch (IOException e)
		{
			throw new WicketRuntimeException(e);
		}
	}

