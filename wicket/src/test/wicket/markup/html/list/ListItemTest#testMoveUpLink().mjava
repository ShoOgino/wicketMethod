	/**
	 * @throws IOException
	 */
	public void testMoveUpLink() throws IOException
	{
		// Prepare the mock application to test the Link
		HttpRequestCycle cycle = createRequestCycle();

		// Create a ListView with a model object which contains 4 items
		ListView lv = createListView(4);

		// add the ListView to the page
		cycle.getPage().add(lv);

		// Create a ListItem for list object at index 1.
		ListItem li = new ListItem(1, lv);

		// Create a move-up Link for the listItem and simulate a user
		// clicking it
		Link link = li.moveUpLink("1");
		link.linkClicked();
		assertEquals(new Integer(1), lv.getListObject(0));
		assertEquals(new Integer(0), lv.getListObject(1));
		assertEquals(new Integer(2), lv.getListObject(2));
		assertEquals(new Integer(3), lv.getListObject(3));

		// Repeat it for some critical entries
		li = new ListItem(0, lv);
		link = li.moveUpLink("1");
		try
		{
			link.linkClicked();
		}
		catch (ArrayIndexOutOfBoundsException ex)
		{
			link = null;
		}
		assertNull(link);

		li = new ListItem(3, lv);
		link = li.moveUpLink("1");
		link.linkClicked();
		assertEquals(new Integer(1), lv.getListObject(0));
		assertEquals(new Integer(0), lv.getListObject(1));
		assertEquals(new Integer(3), lv.getListObject(2));
		assertEquals(new Integer(2), lv.getListObject(3));

		// Be aware: listItem is linked to the index, not the component. Thus
		// repeating the click-event will again swap item 3 and 4.
		link.linkClicked();
		assertEquals(new Integer(1), lv.getListObject(0));
		assertEquals(new Integer(0), lv.getListObject(1));
		assertEquals(new Integer(2), lv.getListObject(2));
		assertEquals(new Integer(3), lv.getListObject(3));
	}

