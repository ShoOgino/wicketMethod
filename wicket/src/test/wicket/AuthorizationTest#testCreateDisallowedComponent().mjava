	/**
	 * Tests that a component cannot be created when authorization is not
	 * allowed.
	 * 
	 * @throws Exception
	 */
	public void testCreateDisallowedComponent() throws Exception
	{
		WicketTester app = new WicketTester();
		app.getSecuritySettings().setAuthorizationStrategy(new DummyAuthorizationStrategy()
		{

			public boolean authorizeInstantiation(Class c)
			{
				return false;
			}
		});
		try
		{
			WebComponent c = new WebComponent("test");
			// bad: authorization should have failed
			fail("authorization check failed to throw an exception");
		}
		catch (AuthorizationException e)
		{
			// this is good: authorization should have failed
		}
	}

