	/**
	 * Test that clickLink on a ResourceLink with a ResourceReference on it works.
	 * 
	 * <p>
	 * See also WICKET-280 Allow to access html resources
	 * </p>
	 */
	public void testClickResourceLink()
	{
		try
		{
			tester.startPage(BlockedResourceLinkPage.class);

			TagTester linkTag = TagTester.createTagByAttribute(tester.getLastResponseAsString(),
				"wicket:id", "link");
			String url = linkTag.getAttribute("href");
			url = url.replace("../", "wicket/");
			tester.executeUrl(url);
			fail("Accessing " + BlockedResourceLinkPage.class + " should have raised a " +
				PackageResourceBlockedException.class);
		}
		catch (PackageResourceBlockedException e)
		{

		}

		tester.startPage(MockResourceLinkPage.class);
		tester.clickLink("link");
		// assertNull(getRequestCodingStrategy());
	}

