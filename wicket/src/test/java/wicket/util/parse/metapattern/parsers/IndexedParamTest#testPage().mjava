	/**
	 * 
	 * @throws Exception
	 */
	public void testPage() throws Exception
	{
		application.setHomePage(Page1.class);
		application.mount("/page2", new IndexedParamUrlCodingStrategy("/page2", Page2.class));

		executeTest(Page1.class, "IndexedParamTest_ExpectedResult-1.html");

		// Click the autolink
		application.setupRequestAndResponse();
		WebRequestCycle cycle = application.createRequestCycle();
		((MockHttpServletRequest)application.getWicketRequest().getHttpServletRequest()).setURL("/WicketTester/WicketTester/page2/abc");
		application.processRequestCycle(cycle);
		
		assertEquals(Page2.class, application.getLastRenderedPage().getClass());

		// Validate the document
		String document = application.getServletResponse().getDocument();
		assertTrue(DiffUtil.validatePage(document, this.getClass(), "IndexedParamTest_ExpectedResult-2.html"));
	}

