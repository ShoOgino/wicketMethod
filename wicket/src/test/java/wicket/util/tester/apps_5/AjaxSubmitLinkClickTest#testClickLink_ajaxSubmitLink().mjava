	/**
	 * 
	 */
	public void testClickLink_ajaxSubmitLink() {
		MockPojo mockPojo = new MockPageWithFormAndLink.MockPojo();
		mockPojo.setName("Mock name");
		
		final MockPageWithFormAndLink page = new MockPageWithFormAndLink(mockPojo);
		AjaxSubmitLink link = new AjaxSubmitLink("link", page.getForm()) {
			private static final long serialVersionUID = 1L;

			protected void onSubmit(AjaxRequestTarget target, Form form)
			{
				linkClicked = true;
			}
		};
		page.add(link);
		
		application.startPage(new ITestPageSource() {
			private static final long serialVersionUID = 1L;

			public Page getTestPage()
			{
				return page;
			}
		});
		
		application.assertRenderedPage(MockPageWithFormAndLink.class);
		
		// Change the name in the textfield
		page.getNameField().setModelValue("new mock value");

		// Click the submit link
		application.clickLink("link");
		
		// Has it really been clicked?
		assertTrue(linkClicked);
		
		// And has the form been "submitted"
		assertEquals("new mock value", mockPojo.getName());
	}

