	/**
	 * 
	 * @throws IOException
	 * @throws ResourceStreamNotFoundException
	 */
	public final void testBalancing() throws IOException, ResourceStreamNotFoundException
	{
		// Note: <img> is one of these none-balanced HTML tags
		MarkupFragment markup = parse("<span wicket:id=\"span\"><img wicket:id=\"img\"><span wicket:id=\"span2\"></span></span>");
		
		ComponentTag t = markup.getTag();
		assertEquals(t.getId(), "span");
		assertNotNull(markup.getChildFragment("span", false));

		MarkupFragment fragment = (MarkupFragment)markup.get(1);
		assertEquals(fragment.getId(), "img");
		assertNotNull(markup.getChildFragment("span:img", false));

		fragment = (MarkupFragment)markup.get(2);
		assertEquals(fragment.getId(), "span2");
		assertNotNull(markup.getChildFragment("span:span2", false));
	}

