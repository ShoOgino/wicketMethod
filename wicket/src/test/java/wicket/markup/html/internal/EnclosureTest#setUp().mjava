	/**
	 * 
	 * @see wicket.WicketTestCase#setUp()
	 */
	@Override
	protected void setUp() throws Exception
	{
		application = new WicketTester(null)
		{
			@Override
			protected void init() 
			{
				super.init();
				getPageSettings().addComponentResolver(new EnclosureResolver());
			}
		};

		this.application.getMarkupSettings().setMarkupParserFactory(new MarkupParserFactory()
		{
			@Override
			public MarkupParser newMarkupParser(MarkupResourceStream resource)
			{
				MarkupParser parser = super.newMarkupParser(resource);
				// register the additional EnclosureHandler
				parser.registerMarkupFilter(new EnclosureHandler());
				return parser;
			}
		});
	}

