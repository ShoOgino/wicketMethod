	/**
	 * Test clean-up of auto added components after removal of the
	 * HtmlHeaderContainer.
	 */
	public void testCleanUpOfAutoAddedComponents()
	{
		tester = new WicketTester(ComponentResolvingPage.class);
		tester.setupRequestAndResponse();
		tester.processRequestCycle();

		// onEndRequest() of auto added component was not called in
		// MarkupContainer#internalEndRequest() using an iterator
		ComponentResolvingPage page = (ComponentResolvingPage)tester.getLastRenderedPage();
		assertTrue("onEndRequest() should be called",
				page.onEndRequestWasCalledOnAutoAddedComponent);
	}

